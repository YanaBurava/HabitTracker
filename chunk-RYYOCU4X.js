import{a as ie}from"./chunk-TNWKGCSE.js";import{j as ae,n as ce,v as se}from"./chunk-CUFDHZV3.js";import{r as ne}from"./chunk-BFZJCCXN.js";import{a as Q}from"./chunk-4QNJIVDD.js";import{b as J,c as X,d as Z,g as ee,h as te}from"./chunk-WCOTOCZP.js";import{t as re,u as oe}from"./chunk-NE27UVNU.js";import"./chunk-BVAX7C6N.js";import"./chunk-UPGNFGOG.js";import{$b as G,Aa as M,Ba as v,Fa as f,Ja as p,Jb as z,Ka as $,Kb as V,Lb as Y,Nb as U,O as j,Ob as A,P as w,Pb as L,R as F,Rb as K,Sa as r,Ta as c,Ua as _,Va as E,Vb as q,X as C,Xa as g,Y as k,Ya as d,cc as T,gb as s,hb as h,ib as O,jb as P,qa as N,qb as R,ra as a,rb as l,sb as B,tb as b,va as x}from"./chunk-2MNLC77U.js";function y(n,t,e){return Q(n,t*7,e)}function pe(n,t){let e=X(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,o=J(n,t?.in),m=o.getDay(),u=(m<i?-7:0)+6-(m-i);return o.setDate(o.getDate()+u),o.setHours(23,59,59,999),o}function de(n,t,e){return y(n,-t,e)}var S=class n{constructor(t){this.http=t}API_KEY="248d369aa6322178f4f2620b2da7f29c";baseUrl="https://api.openweathermap.org/data/2.5/weather";getWeatherByCoords(t,e){let i=`${this.baseUrl}?lat=${t}&lon=${e}&appid=${this.API_KEY}&units=metric`;return this.http.get(i)}static \u0275fac=function(e){return new(e||n)(F(q))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function be(n,t){n&1&&(r(0,"div"),s(1,"Loading weather..."),c())}function ue(n,t){if(n&1&&(r(0,"div"),s(1),c()),n&2){let e=d();a(),h(e.error)}}function xe(n,t){if(n&1&&(r(0,"div",2)(1,"div",3),_(2,"img",4),r(3,"div",5),s(4),l(5,"number"),c()(),r(6,"div",6)(7,"p")(8,"strong"),s(9),c()(),r(10,"p"),s(11),l(12,"titlecase"),c()()()),n&2){let e=d();a(2),p("src","https://openweathermap.org/img/wn/"+e.weatherData.weather[0].icon+"@2x.png",N)("alt",e.weatherData.weather[0].description),a(2),O(" ",b(5,6,e.weatherData.main.temp,"1.0-0"),"\xB0C "),a(5),P("",e.weatherData.name,", ",e.weatherData.sys.country,""),a(2),h(B(12,9,e.weatherData.weather[0].description))}}var W=class n{constructor(t){this.weatherService=t}weatherData;loading=!0;error="";ngOnInit(){navigator.geolocation.getCurrentPosition(t=>{let{latitude:e,longitude:i}=t.coords;this.weatherService.getWeatherByCoords(e,i).subscribe({next:o=>{this.weatherData=o,this.loading=!1},error:()=>{this.error="Unable to fetch weather data.",this.loading=!1}})},t=>{this.error="Location permission denied.",this.loading=!1})}getTime(t){return new Date(t*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||n)(x(S))};static \u0275cmp=M({type:n,selectors:[["app-weather"]],standalone:!1,decls:3,vars:3,consts:[[4,"ngIf"],["class","weather-card",4,"ngIf"],[1,"weather-card"],[1,"weather-top"],[3,"src","alt"],[1,"weather-temp"],[1,"weather-info"]],template:function(e,i){e&1&&f(0,be,2,0,"div",0)(1,ue,2,1,"div",0)(2,xe,13,11,"div",1),e&2&&(p("ngIf",i.loading),a(),p("ngIf",i.error),a(),p("ngIf",i.weatherData&&!i.loading))},dependencies:[V,L,U],styles:[".weather-card[_ngcontent-%COMP%]{width:320px;padding:24px;border-radius:24px;background:linear-gradient(135deg,#c5e0e0,#b8b7eec9);box-shadow:0 10px 20px #6c5ce766,0 6px 6px #6c5ce74d;color:#fff;text-align:center;transition:transform .3s ease,box-shadow .3s ease;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.3)}.weather-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 40px #9e96dd99,0 10px 12px #9d94e580}.weather-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:16px;animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards}.weather-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;filter:drop-shadow(0 3px 6px rgba(0,0,0,.2));animation:_ngcontent-%COMP%_bounce 1.5s infinite ease-in-out}.weather-temp[_ngcontent-%COMP%]{font-size:3.6rem;font-weight:700;color:#fff;text-shadow:0 2px 8px rgba(0,0,0,.4);animation:_ngcontent-%COMP%_fadeIn .8s ease forwards}.weather-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:1.1rem;color:#e0e0ff;font-weight:500}.weather-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#f8f8ff;font-weight:700}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}"]})};var we=(n,t)=>({backgroundColor:n,boxShadow:t});function Ce(n,t){if(n&1&&(r(0,"th"),s(1),l(2,"date"),c()),n&2){let e=t.$implicit;a(),h(b(2,1,e,"EEE d"))}}function ke(n,t){if(n&1){let e=E();r(0,"td",12),g("click",function(){let o=C(e).$implicit,m=d().$implicit,u=d();return k(u.toggleMark(m,o))}),r(1,"input",13),g("click",function(o){let m=C(e).$implicit,u=d().$implicit,le=d();return o.stopPropagation(),k(le.toggleMark(u,m))}),c()()}if(n&2){let e=t.$implicit,i=d().$implicit,o=d();p("ngStyle",R(2,we,o.isMarked(i,e)?i.color+"80":"rgba(255, 255, 255, 0.4)",o.isMarked(i,e)?"0 4px 8px rgba(0, 0, 0, 0.25), inset 0 2px 4px rgba(255, 255, 255, 0.4)":"0 2px 4px rgba(0, 0, 0, 0.15), inset 0 2px 4px rgba(255, 255, 255, 0.3)")),a(),p("checked",o.isMarked(i,e))}}function Me(n,t){if(n&1){let e=E();r(0,"tr")(1,"td",8),g("click",function(){let o=C(e).$implicit,m=d();return k(m.goToHabitDetail(o))}),s(2),c(),f(3,ke,2,5,"td",9),r(4,"td")(5,"div",10),_(6,"div",11),r(7,"span"),s(8),c()()()()}if(n&2){let e=t.$implicit,i=d();a(2),h(e.name),a(),p("ngForOf",i.weekDates),a(3),$("width",i.getProgress(e),"%"),a(2),O("",i.getProgress(e),"%")}}var H=class n{constructor(t,e){this.habitService=t;this.router=e}today=new Date;currentDate;weather;wordOfTheDay;currentWeekStart;currentWeekEnd;weekDates=[];habits=[];ngOnInit(){let t=new Date;this.currentDate=t.toLocaleDateString(),this.setCurrentDate(),this.setCurrentWeek(new Date),this.loadHabits()}setCurrentDate(){this.currentDate=ee(new Date,"yyyy-MM-dd")}setCurrentWeek(t){this.currentWeekStart=Z(t,{weekStartsOn:1}),this.currentWeekEnd=pe(t,{weekStartsOn:1}),this.weekDates=[];for(let e=0;e<7;e++){let i=new Date(this.currentWeekStart);i.setDate(this.currentWeekStart.getDate()+e),this.weekDates.push(this.habitService.formatDate(i))}this.loadHabits()}previousWeek(){let t=de(this.currentWeekStart,1);this.setCurrentWeek(t)}nextWeek(){let t=y(this.currentWeekStart,1);this.setCurrentWeek(t)}loadHabits(){let t=this.habitService.getActiveHabits();this.habits=this.habitService.filterHabitsByWeek(t,this.currentWeekStart,this.currentWeekEnd)}isMarked(t,e){return this.habitService.isMarkedDay(t,e)}toggleMark(t,e){this.habitService.toggleMarkDay(t,e)}getProgress(t){return this.habitService.getProgressPercentage(t)}goToHabitDetail(t){this.router.navigate(["/habit",t.id])}static \u0275fac=function(e){return new(e||n)(x(te),x(G))};static \u0275cmp=M({type:n,selectors:[["app-home"]],standalone:!1,decls:28,vars:11,consts:[[1,"header-weather"],[1,"main-title"],[1,"content-block"],["disabled","true",3,"selected"],[1,"week-navigation","mat-elevation-z2"],["mat-icon-button","",3,"click"],[1,"habit-table"],[4,"ngFor","ngForOf"],[3,"click"],["class","clickable",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"progress-container"],[1,"progress-bar"],[1,"clickable",3,"click","ngStyle"],["type","checkbox",3,"click","checked"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"h1",1),s(2,"My Habits Tracker"),c(),r(3,"div",2),_(4,"mat-calendar",3)(5,"app-weather"),c()(),r(6,"div",4)(7,"button",5),g("click",function(){return i.previousWeek()}),r(8,"mat-icon"),s(9,"chevron_left"),c()(),r(10,"span"),s(11),l(12,"date"),l(13,"date"),c(),r(14,"button",5),g("click",function(){return i.nextWeek()}),r(15,"mat-icon"),s(16,"chevron_right"),c()()(),r(17,"div",6)(18,"table")(19,"thead")(20,"tr")(21,"th"),s(22,"Habit"),c(),f(23,Ce,3,4,"th",7),r(24,"th"),s(25,"Progress"),c()()(),r(26,"tbody"),f(27,Me,9,5,"tr",7),c()()()),e&2&&(a(4),p("selected",i.today),a(7),P("",b(12,5,i.currentWeekStart,"MMM d")," \u2013 ",b(13,8,i.currentWeekEnd,"MMM d"),""),a(12),p("ngForOf",i.weekDates),a(4),p("ngForOf",i.habits))},dependencies:[z,Y,re,ae,W,A],styles:[".header-weather[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.main-title[_ngcontent-%COMP%]{text-align:center;font-size:2rem;margin-bottom:2rem;color:#aca0a0}.content-block[_ngcontent-%COMP%]{display:flex;gap:2rem;justify-content:center;flex-wrap:wrap}mat-calendar[_ngcontent-%COMP%]{flex-shrink:0;margin:0 1rem;width:240px;max-width:70%;border-radius:12px;box-shadow:0 8px 20px #0000001a;background:#fffc;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}app-weather[_ngcontent-%COMP%]{flex-shrink:0;margin:0 1rem}.week-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:.5rem 1rem;border-radius:12px;background:#fff;font-size:1.1rem;font-weight:700;font-family:Nunito,sans-serif;color:#918585}.habit-table[_ngcontent-%COMP%]{margin:.5rem auto;padding:.7rem;max-width:900px}.habit-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 12px;font-size:.95rem}.habit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95aaee,#ae8ada);box-shadow:0 0 12px #9000ff99;color:#fff;font-weight:700;padding:.8rem 1rem;border-radius:12px;text-align:center;box-shadow:0 3px 6px #0000001f}.habit-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#ffffff40;border-radius:16px;box-shadow:0 8px 20px #0000001a;transition:transform .3s ease}.habit-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 12px 32px #00000026}.habit-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ffffff80;border-radius:12px;box-shadow:0 2px 6px #4140401f,inset 0 2px 6px #ffffff4d;padding:.6rem 1rem;text-align:center;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease}.habit-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover{background-color:#f0f4f8;color:#369;box-shadow:0 0 10px #33669940}.habit-table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.2);accent-color:#6699cc;pointer-events:auto}.progress-container[_ngcontent-%COMP%]{background-color:#e0e0e0b3;border-radius:14px;overflow:hidden;height:18px;margin-top:.5rem;position:relative}.progress-bar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00c9ff,#92fe9d);color:#fff;box-shadow:0 0 6px #00ffc899;height:100%;transition:width .4s ease;border-radius:14px 0 0 14px}.progress-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:.8rem;font-weight:700;color:#49742f}@media (max-width: 1024px){.habit-table[_ngcontent-%COMP%]{max-width:100%;padding:0 1rem}}@media (max-width: 768px){.habit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.habit-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:1.2rem;padding:1rem;box-shadow:0 8px 16px #0000001f}.habit-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.7rem 1rem;margin:.3rem 0}.week-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;padding:1rem}.content-block[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}mat-calendar[_ngcontent-%COMP%]{width:100%}app-weather[_ngcontent-%COMP%]{width:100%}}"]})};var ve=[{path:"",component:H},{path:"habit/:id",component:ie}],I=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=v({type:n});static \u0275inj=w({imports:[T.forChild(ve),T]})};var me=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=v({type:n});static \u0275inj=w({imports:[K,I,oe,ne,ce,se]})};export{me as HomeModule};
